project:
  type: website
  output-dir: docs
  post-render:
    - "python add-canonicals.py"
    - "python generate-llms-txt.py"

website:
  title: "Matt Hodges"
  description: "Matt Hodges is a political technologist who leverages over a decade of experience in Democratic campaigns and engineering to drive change."
  image: "img/social.jpg"
  favicon: "img/favicon.png"
  twitter-card: true
  site-url: https://matthodges.com
  open-graph: true
  page-footer: |
     Copyright 2026, Matt Hodges
  navbar:
    right:
      - text: "LinkedIn"
        href: https://www.linkedin.com/in/hodgesmr
        target: _blank
      - text: "GitHub"
        href: https://github.com/hodgesmr
        target: _blank 
      - text: "Posts"
        href: posts.qmd
      - text: "RSS"
        href: posts.xml
      - text: "llms.txt"
        href: llms.txt
  search: 
    location: navbar
    type: overlay

format:
  html:
    theme:
      - cosmo
      - styles.scss
    header-includes: |
      <link href="https://fonts.googleapis.com/css2?family=Figtree:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
      <script>
        document.addEventListener('DOMContentLoaded', function() {
          const container = document.querySelector('.quarto-alternate-formats li');
          if (!container) return;
          
          let mdUrl;
          const path = window.location.pathname;
          if (path.endsWith('.html')) {
            mdUrl = window.location.origin + path.replace(/\.html$/, '.md');
          } else {
            // Directory URL like /posts/2026-01-20-slug/ or /posts/2026-01-20-slug
            const base = path.endsWith('/') ? path : path + '/';
            mdUrl = window.location.origin + base + 'index.md';
          }
          const prompt = encodeURIComponent(`I'd like to discuss the content from ${mdUrl}`);
          
          const links = [
            {
              text: 'Chat in ChatGPT',
              href: `https://chatgpt.com/?q=${prompt}`,
              icon: '<i class="bi bi-openai"></i>'
            },
            {
              text: 'Chat in Claude', 
              href: `https://claude.ai/new?q=${prompt}`,
              icon: '<i class="bi bi-claude"></i>'
            }
          ];
          
          links.forEach(link => {
            const li = document.createElement('li');
            li.className = 'nav-item';
            li.innerHTML = `<a href="${link.href}" target="_blank">${link.icon} ${link.text}</a>`;
            container.appendChild(li);
          });
        });
      </script>
      <script>
        document.addEventListener('DOMContentLoaded', () => {
          const formats = document.querySelector('.quarto-alternate-formats');
          if (!formats) return;

          // Choose insertion point: right under the title block header.
          const titleBlock = document.querySelector('#title-block-header');
          if (!titleBlock) return;

          // We'll move it only on "phone" widths.
          const mq = window.matchMedia('(max-width: 767.98px)');

          // Remember original position so we can restore if someone resizes wider.
          const placeholder = document.createElement('span');
          placeholder.setAttribute('data-qaf-placeholder', 'true');

          const moveUnderTitle = () => {
            if (mq.matches) {
              if (!formats.hasAttribute('data-qaf-moved')) {
                formats.parentNode.insertBefore(placeholder, formats);
                titleBlock.insertAdjacentElement('afterend', formats);
                formats.setAttribute('data-qaf-moved', 'true');
              }
            } else {
              // Restore to original location if we previously moved it.
              if (formats.hasAttribute('data-qaf-moved') && placeholder.parentNode) {
                placeholder.parentNode.insertBefore(formats, placeholder);
                placeholder.remove();
                formats.removeAttribute('data-qaf-moved');
              }
            }
          };

          moveUnderTitle();
          mq.addEventListener('change', moveUnderTitle);
        });
      </script>
    mainfont: Figtree
    fontsize: 1.3em
    grid: 
      body-width: 1000px
    toc: true
    link-external-newwindow: true
    title-prefix: ""
    fig-responsive: true
    fig-format: svg
  gfm:
    output-ext: md
    preview-mode: raw
    fig-format: svg
language: 
  search-box-placeholder: "Search"
  related-formats-title: "For LLM Agents:"